<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CBTLearning SNBT – TikTok FYP Ready</title>

<style>
body{
  margin:0;
  height:100vh;
  background:#020617;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:system-ui,-apple-system,Segoe UI;
  overflow:hidden;
}

/* ===== PHONE ===== */
.phone{
  width:230px;
  height:460px;
  position:relative;
  transform-style:preserve-3d;
  animation:floatPhone 6s ease-in-out infinite;
}
@keyframes floatPhone{
  0%,100%{transform:translateY(0) rotateX(3deg) rotateY(-3deg)}
  50%{transform:translateY(-5px) rotateX(5deg) rotateY(-5deg)}
}

/* ===== BODY ===== */
.body{
  position:absolute;
  inset:0;
  border-radius:34px;
  background:#020617;
  box-shadow:
    0 60px 120px rgba(0,0,0,.8),
    inset 0 0 0 1.5px #334155;
}
.body::before{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius:36px;
  background:linear-gradient(
    180deg,
    transparent 0%,
    rgba(56,189,248,.45) 50%,
    transparent 100%
  );
  opacity:.35;
  animation:rimMove 6s ease-in-out infinite;
}
@keyframes rimMove{
  0%,100%{transform:translateY(-18px)}
  50%{transform:translateY(18px)}
}

/* ===== SCREEN ===== */
.screen{
  position:absolute;
  inset:10px;
  border-radius:26px;
  overflow:hidden;
}

/* ===== BRAND ===== */
.branding{
  position:absolute;
  top:6px;
  right:6px;
  font-size:10px;
  font-weight:700;
  color:#fff;
  opacity:.75;
  z-index:50;
}

/* ===== HOOK ===== */
.hook-svg{
  position:absolute;
  top:22px;
  width:100%;
  height:48px;
  z-index:40;
}
.hook-text{
  font-size:13px;
  fill:#38bdf8;
  font-weight:700;
  letter-spacing:1.2px;
}

/* ===== SUBTITLE ===== */
.hook-subtitle{
  position:absolute;
  top:64px;
  width:100%;
  text-align:center;
  color:#e5e7eb;
  font-size:.8em;
  font-weight:600;
  opacity:.9;
}

/* ===== RATIONALE ===== */
.rationale{
  position:absolute;
  top:104px;
  width:90%;
  left:5%;
  opacity:0;
  transform:translateY(14px) scale(.92);
  transition:all .8s cubic-bezier(.22,.9,.22,1);
  z-index:30;
}
.rationale.show{
  opacity:1;
  transform:translateY(0) scale(1);
  animation:floatRationale 4s ease-in-out infinite;
}
.rationale img{
  width:100%;
  height:auto;
  object-fit:contain;
}
@keyframes floatRationale{
  0%,100%{transform:translateY(0) scale(1)}
  50%{transform:translateY(-6px) scale(1)}
}

/* ===== CASCADE ===== */
.cascade-container{
  position:absolute;
  top:180px;
  width:100%;
  height:240px;
  pointer-events:none;
  z-index:20;
}
.cascade-container img{
  position:absolute;
  width:80%;
  left:10%;
  opacity:0;
  transform:translateY(40px) scale(.94);
  transition:all .7s cubic-bezier(.22,.9,.22,1);
}

/* ===== QUIZ ===== */
.quiz-text{
  position:absolute;
  bottom:14px;
  width:90%;
  left:5%;
  color:#fff;
  font-weight:700;
  text-align:center;
  opacity:0;
  transition:opacity .6s ease;
  z-index:40;
}
.quiz-text.show{opacity:1}

/* ===== WORD FLY ===== */
.word-fly-container{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:60;
}
.word-fly{
  position:absolute;
  font-weight:700;
  color:#fff;
  transition:
    transform 1.2s cubic-bezier(.22,.9,.22,1),
    opacity 1s ease;
}
.word-fly.out{opacity:0}
</style>
</head>

<body>
<div class="phone">
  <div class="body"></div>
  <div class="screen">

    <div class="branding">ETK Yogya</div>

    <!-- Curved Hook -->
    <svg class="hook-svg" viewBox="0 0 230 50">
      <defs>
        <path id="arc" d="M12,40 A110,32 0 0,1 218,40"/>
      </defs>
      <text class="hook-text">
        <textPath href="#arc" startOffset="50%" text-anchor="middle">
          ...CBTLearning | Paham SNBT'26...
        </textPath>
      </text>
    </svg>

    <div class="hook-subtitle">•Rationale Generator•</div>

    <div class="rationale" id="rationale">
      <img id="image">
    </div>

    <div class="cascade-container" id="cascade"></div>

    <div class="quiz-text" id="quizText"></div>
    <div class="word-fly-container" id="fly"></div>
  </div>
</div>

<script>
const content = [
  {
    question: "Jika 3x + 5 = 20, maka nilai x adalah",
    rationale: "Kurangi 5 dari kedua sisi: 3x=15, bagi 3 → x=5",
    image: "https://raw.githubusercontent.com/etkyogya-hub/cbtlearning-snbt-1/main/videos/assets/Qz1.jpg"
  },
  {
    question: "Jika y/2 - 4 = 6, maka nilai y adalah",
    rationale: "Tambahkan 4: y/2=10, kali 2 → y=20",
    image: "https://raw.githubusercontent.com/etkyogya-hub/cbtlearning-snbt-1/main/videos/assets/Qz2.jpg"
  },
  {
    question: "Jika 2a + 3 = 11, maka a=?",
    rationale: "Kurangi 3: 2a=8, bagi 2 → a=4",
    image: "https://raw.githubusercontent.com/etkyogya-hub/cbtlearning-snbt-1/main/videos/assets/Qz3.jpg"
  }
];

const rationaleEl = document.getElementById("rationale");
const imageEl = document.getElementById("image");
const quizEl = document.getElementById("quizText");
const cascade = document.getElementById("cascade");
const fly = document.getElementById("fly");

let idx = 0;
const DURATION = 5200;

/* split words for fly animation */
function split(text){
  quizEl.innerHTML = text.split(" ").map(w=>`<span>${w}</span>`).join(" ");
}

/* fly words animation */
function flyWords(){
  fly.innerHTML="";
  const p=fly.getBoundingClientRect();
  quizEl.querySelectorAll("span").forEach((s,i)=>{
    const r=s.getBoundingClientRect();
    const c=s.cloneNode(true);
    c.className="word-fly";
    c.style.left=r.left-p.left+"px";
    c.style.top =r.top -p.top +"px";
    fly.appendChild(c);
    setTimeout(()=>{
      const a=Math.random()*Math.PI*2;
      c.style.transform=`translate(${Math.cos(a)*80}px,${Math.sin(a)*80}px) scale(1.8)`;
      c.classList.add("out");
    },i*120);
    setTimeout(()=>c.remove(),1600);
  });
}

/* cascade images */
function showCascade(){
  cascade.innerHTML="";
  content.forEach((c,i)=>{
    const img = document.createElement("img");
    img.src = c.image;
    img.style.zIndex = 10+i;
    cascade.appendChild(img);
    setTimeout(()=>{
      img.style.opacity=1;
      img.style.transform=`translateY(${i*14}px) scale(1)`;
    },i*260);
    setTimeout(()=>img.remove(),DURATION);
  });
}

/* main loop */
function show(){
  const c = content[idx % content.length];
  idx++;

  rationaleEl.classList.remove("show");
  quizEl.classList.remove("show");
  quizEl.innerHTML = "";

  imageEl.src = c.image;
  imageEl.onload = ()=>{
    setTimeout(()=>rationaleEl.classList.add("show"),200);
    setTimeout(()=>{
      quizEl.classList.add("show");
      split(c.question);
      flyWords();
    },900);
    setTimeout(()=>{
      rationaleEl.classList.remove("show");
      quizEl.classList.remove("show");
      showCascade();
    },DURATION-1000);
  };

  setTimeout(show,DURATION+1400);
}

show();
</script>
</body>
</html>
