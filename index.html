<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>SNBT Auto Loop Motion</title>

<style>
body{
  margin:0;
  height:100vh;
  background:#020617;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:system-ui;
  overflow:hidden;
}

/* MOCKUP 3D */
.phone{
  width:230px;
  height:460px;
  position:relative;
  transform-style:preserve-3d;
  animation:floatPhone 6s ease-in-out infinite;
}
@keyframes floatPhone{
  0%,100%{transform:translateY(0) rotateX(4deg) rotateY(-4deg)}
  50%{transform:translateY(-8px) rotateX(6deg) rotateY(-6deg)}
}
.body{
  position:absolute;
  inset:0;
  border-radius:34px;
  background:#020617;
  box-shadow:
    0 50px 100px rgba(0,0,0,.75),
    inset 0 0 0 2px #334155;
}
.body::before{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius:36px;
  background:linear-gradient(
    180deg,
    transparent 0%,
    rgba(56,189,248,.7) 50%,
    transparent 100%
  );
  opacity:.6;
  animation:rimMove 4s ease-in-out infinite;
}
@keyframes rimMove{
  0%,100%{transform:translateY(-20px)}
  50%{transform:translateY(20px)}
}

.screen{
  position:absolute;
  inset:10px;
  border-radius:26px;
  background:#020617;
  overflow:hidden;
  padding:14px;
  color:#e5e7eb;
  font-size:12px;
}

/* QUIZ */
.quiz p{font-weight:700;line-height:1.4}
.quiz li{
  list-style:none;
  margin:6px 0;
  padding:6px;
  border:1px solid #334155;
  border-radius:8px;
}

/* WORD FLY */
.word-fly{
  position:absolute;
  color:#fff;
  font-weight:700;
  pointer-events:none;
  transition:transform 1.2s cubic-bezier(.22,.9,.22,1),
             opacity 1s ease;
  z-index:99;
}
.word-fly.out{opacity:0}

/* HOOK */
.hook{
  margin-top:16px;
  font-size:16px;
  font-weight:900;
  color:#fff;
  animation:hookWave 3s ease-in-out infinite;
}
@keyframes hookWave{
  0%{transform:translateY(0)}
  25%{transform:translateY(-4px)}
  50%{transform:translateY(0)}
  75%{transform:translateY(4px)}
  100%{transform:translateY(0)}
}

/* VIDEO */
.rationale{
  position:absolute;
  inset:0;
  opacity:0;
  transition:opacity .8s ease;
}
.rationale.show{opacity:1}
.rationale video{
  width:100%;
  height:100%;
  object-fit:cover;
}
</style>
</head>

<body>

<div class="phone">
  <div class="body"></div>
  <div class="screen" id="screen">

    <div class="quiz" id="quiz">
      <p id="quizText">
        Jika 3x + 5 = 20, maka nilai x adalah
      </p>
      <ul>
        <li>A. 3</li>
        <li>B. 4</li>
        <li>C. 5</li>
        <li>D. 6</li>
      </ul>

      <div class="hook" id="hook">
        SNBT bisa dibedah tanpa bimbel
      </div>
    </div>

    <div class="rationale" id="rationale">
      <video muted playsinline preload="auto" id="video">
        <source src="https://raw.githubusercontent.com/etkyogya-hub/cbtlearning-snbt-1/main/videos/demo-snbt.mp4" type="video/mp4">
      </video>
    </div>

  </div>
</div>

<script>
const screen = document.getElementById("screen");
const quiz = document.getElementById("quiz");
const quizText = document.getElementById("quizText");
const hook = document.getElementById("hook");
const rationale = document.getElementById("rationale");
const video = document.getElementById("video");

const LOOP_DURATION = 9000;

/* SPLIT WORDS */
function splitWords(el){
  const text = el.dataset.text || el.innerText;
  el.dataset.text = text;
  el.innerHTML = text.split(" ").map(w=>`<span>${w}</span>`).join(" ");
}
splitWords(quizText);
splitWords(hook);

/* WORD FLY */
function flyWords(el, radius){
  el.querySelectorAll("span").forEach((span,i)=>{
    const r = span.getBoundingClientRect();
    const b = screen.getBoundingClientRect();

    const clone = span.cloneNode(true);
    clone.className="word-fly";
    clone.style.left = r.left - b.left + "px";
    clone.style.top  = r.top  - b.top  + "px";
    screen.appendChild(clone);

    setTimeout(()=>{
      const a=Math.random()*Math.PI*2;
      const d=Math.random()*radius+40;
      clone.style.transform=
        `translate(${Math.cos(a)*d}px,${Math.sin(a)*d}px) scale(2.2)`;
      clone.classList.add("out");
    },i*120);

    setTimeout(()=>clone.remove(),1800);
  });
}

/* RESET */
function resetState(){
  rationale.classList.remove("show");
  video.pause();
  video.currentTime = 0;
  splitWords(quizText);
  splitWords(hook);
}

/* SEQUENCE */
function run(){
  resetState();

  setTimeout(()=>flyWords(quizText,140),1200);
  setTimeout(()=>flyWords(hook,160),2600);

  setTimeout(()=>{
    rationale.classList.add("show");
    video.play();
  },4600);

  setTimeout(()=>video.pause(),7200);

  setTimeout(run, LOOP_DURATION);
}

run();
</script>

</body>
</html>
