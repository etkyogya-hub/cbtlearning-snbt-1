<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>SNBT Auto Loop Motion - Lokal Ready</title>

<style>
body{
  margin:0;
  height:100vh;
  background:#020617;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:system-ui;
  overflow:hidden;
}

/* MOCKUP 3D PHONE */
.phone{
  width:230px;
  height:460px;
  position:relative;
  transform-style:preserve-3d;
  animation:floatPhone 6s ease-in-out infinite;
}
@keyframes floatPhone{
  0%,100%{transform:translateY(0) rotateX(4deg) rotateY(-4deg)}
  50%{transform:translateY(-8px) rotateX(6deg) rotateY(-6deg)}
}
.body{
  position:absolute;
  inset:0;
  border-radius:34px;
  background:#020617;
  box-shadow:
    0 50px 100px rgba(0,0,0,.75),
    inset 0 0 0 2px #334155;
}
.body::before{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius:36px;
  background:linear-gradient(
    180deg,
    transparent 0%,
    rgba(56,189,248,.7) 50%,
    transparent 100%
  );
  opacity:.6;
  animation:rimMove 4s ease-in-out infinite;
}
@keyframes rimMove{
  0%,100%{transform:translateY(-20px)}
  50%{transform:translateY(20px)}
}

/* SCREEN */
.screen{
  position:absolute;
  inset:10px;
  border-radius:26px;
  background:#020617;
  overflow:hidden;
  padding:14px;
  color:#e5e7eb;
  font-size:12px;
}

/* QUIZ */
.quiz p{font-weight:700;line-height:1.4}
.quiz li{
  list-style:none;
  margin:6px 0;
  padding:6px;
  border:1px solid #334155;
  border-radius:8px;
}

/* WORD FLY */
.word-fly{
  position:absolute;
  color:#fff;
  font-weight:700;
  pointer-events:none;
  transition:transform 1.2s cubic-bezier(.22,.9,.22,1),
             opacity 1s ease;
  z-index:99;
}
.word-fly.out{opacity:0}

/* HOOK */
.hook{
  margin-top:16px;
  font-size:16px;
  font-weight:900;
  color:#fff;
  animation:hookPulse 1.6s ease-in-out infinite;
}
@keyframes hookPulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.04)}
}

/* VIDEO RATIONALE */
.rationale{
  position:absolute;
  inset:0;
  opacity:0;
  transition:opacity .8s ease, transform .8s ease;
  transform:scale(1.08);
}
.rationale.show{
  opacity:1;
  transform:scale(1);
}
.rationale video{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* SUBTITLE */
.subtitle{
  position:absolute;
  bottom:22px;
  left:50%;
  transform:translateX(-50%);
  max-width:85%;
  text-align:center;
  font-size:14px;
  font-weight:900;
  line-height:1.35;
  color:#fff;
  pointer-events:none;
  z-index:120;
  text-shadow:0 2px 8px rgba(0,0,0,.85),0 0 2px rgba(0,0,0,.9);
}
.subtitle span{
  display:inline-block;
  opacity:0;
  transform:translateY(8px) scale(.96);
  animation:subPop .4s cubic-bezier(.22,.9,.22,1) forwards;
  color:#fff;
}
.subtitle span.keyword{
  color:#38bdf8;
  text-shadow:0 4px 12px rgba(0,0,0,.85);
  transform:translateY(12px) scale(1.1);
  animation:subPopKeyword .5s cubic-bezier(.22,.9,.22,1) forwards;
}
@keyframes subPop{to{opacity:1;transform:none;}}
@keyframes subPopKeyword{to{opacity:1;transform:none;}}

/* CTA */
.cta{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:10px;
  background:rgba(2,6,23,.55);
  backdrop-filter:blur(4px);
  opacity:0;
  pointer-events:none;
  transition:opacity .6s ease;
  z-index:150;
}
.cta.show{opacity:1;}
.cta-main{
  font-size:18px;
  font-weight:900;
  color:#fff;
  animation:ctaPulse 1.4s ease-in-out infinite;
}
.cta-sub{
  font-size:13px;
  font-weight:700;
  color:#c7d2fe;
}
@keyframes ctaPulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.06)}
}
</style>
</head>

<body>

<div class="phone">
  <div class="body"></div>
  <div class="screen" id="screen">

    <div class="quiz" id="quiz">
      <p id="quizText">Jika 3x + 5 = 20, maka nilai x adalah</p>
      <ul>
        <li>A. 3</li>
        <li>B. 4</li>
        <li>C. 5</li>
        <li>D. 6</li>
      </ul>
      <div class="hook" id="hook">SNBT bisa ditaklukkan TANPA bimbel</div>
    </div>

    <div class="rationale" id="rationale">
      <video id="video" muted autoplay loop playsinline preload="auto">
        <source src="videos/demo-snbt.mp4" type="video/mp4">
      </video>
    </div>

    <div class="subtitle" id="subtitle"></div>
    <div class="cta" id="cta">
      <div class="cta-main">Follow untuk SNBT Logic</div>
      <div class="cta-sub">Save biar gak lupa caranya</div>
    </div>

  </div>
</div>

<script>
const screen = document.getElementById("screen");
const quiz = document.getElementById("quiz");
const quizText = document.getElementById("quizText");
const hook = document.getElementById("hook");
const rationale = document.getElementById("rationale");
const video = document.getElementById("video");
const subtitle = document.getElementById("subtitle");
const cta = document.getElementById("cta");

const LOOP_DURATION = 8800;

const subtitleLines = [
  "Ini bukan tebak-tebakan SNBT",
  "Ini cara berpikir soal SNBT",
  "Lihat pola soalnya",
  "Jawaban bisa diprediksi SNBT"
];

/* SPLIT WORDS */
function splitWords(el){
  const text = el.dataset.text || el.innerText;
  el.dataset.text = text;
  el.innerHTML = text.split(" ").map(w=>`<span>${w}</span>`).join(" ");
}
splitWords(quizText);
splitWords(hook);

/* WORD FLY */
function flyWords(el, radius){
  el.querySelectorAll("span").forEach((span,i)=>{
    const r = span.getBoundingClientRect();
    const b = screen.getBoundingClientRect();
    const clone = span.cloneNode(true);
    clone.className="word-fly";
    clone.style.left = r.left - b.left + "px";
    clone.style.top  = r.top  - b.top  + "px";
    screen.appendChild(clone);
    setTimeout(()=>{
      const a=Math.random()*Math.PI*2;
      const d=Math.random()*radius+40;
      clone.style.transform=`translate(${Math.cos(a)*d}px,${Math.sin(a)*d}px) scale(2.2)`;
      clone.classList.add("out");
    },i*120);
    setTimeout(()=>clone.remove(),1800);
  });
}

/* SUBTITLE - HIGHLIGHT KEYWORD SNBT */
function showSubtitle(text, startDelay=0, beat=800){
  setTimeout(()=>{
    subtitle.innerHTML = "";
    text.split(" ").forEach((word,i)=>{
      const span = document.createElement("span");
      span.textContent = word + " ";
      span.style.animationDelay = (i*beat/1000)+"s";
      span.style.animationDuration = ".4s";
      if(word.toUpperCase().includes("SNBT")){
        span.classList.add("keyword");
      }
      subtitle.appendChild(span);
    });
  }, startDelay);
}

function clearSubtitle(){ subtitle.innerHTML = ""; }

/* RESET */
function resetState(){
  rationale.classList.remove("show");
  cta.classList.remove("show");
  clearSubtitle();
  if(video){
    video.pause();
    video.currentTime = 0;
  }
  splitWords(quizText);
  splitWords(hook);
}

/* MAIN LOOP */
function run(){
  resetState();

  setTimeout(()=>flyWords(quizText,150),900);
  setTimeout(()=>flyWords(hook,180),2200);

  setTimeout(()=>{
    rationale.classList.add("show");
    video.play().catch(()=>{});

    showSubtitle(subtitleLines[0],0,700);
    showSubtitle(subtitleLines[1],1200,800);
    showSubtitle(subtitleLines[2],2600,750);
    showSubtitle(subtitleLines[3],3500,700);

  },3800);

  setTimeout(()=>{
    video.pause();
    cta.classList.add("show");
  },7200);

  setTimeout(run, LOOP_DURATION);
}

/* START LOOP WHEN VIDEO READY */
video.addEventListener("canplay", ()=>{
  run();
});

/* DEBUG */
video.addEventListener("error", e=>{
  console.log("VIDEO ERROR:", e);
});
video.addEventListener("loadeddata", ()=>{
  console.log("VIDEO READY TO PLAY");
});
</script>

</body>
</html>
