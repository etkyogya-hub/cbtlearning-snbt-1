<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>SNBT Kinetic Demo</title>

<style>
body{
  margin:0;
  height:100vh;
  background:#020617;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:system-ui;
  overflow:hidden;
}

/* ================= MOCKUP (ANCHOR) ================= */
.phone{
  width:230px;
  height:460px;
  position:relative;
}
.body{
  position:absolute;
  inset:0;
  border-radius:34px;
  background:#020617;
  box-shadow:0 40px 90px rgba(0,0,0,.7),
             inset 0 0 0 2px #334155;
}
.screen{
  position:absolute;
  inset:10px;
  border-radius:26px;
  background:#020617;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
}
.screen video{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* ================= FLY OBJECTS ================= */
.fly{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  transition:transform 1.3s cubic-bezier(.22,.9,.22,1),
             opacity .8s ease,
             filter .8s ease;
  pointer-events:none;
  opacity:0;
}

/* quiz */
.quiz{
  background:#020617;
  color:#e5e7eb;
  padding:14px;
  border-radius:14px;
  width:220px;
  font-size:12px;
  box-shadow:0 20px 50px rgba(0,0,0,.6);
}
.quiz p{margin:0 0 8px;font-weight:700}
.quiz li{
  list-style:none;
  padding:6px;
  border:1px solid #334155;
  border-radius:8px;
  margin-bottom:6px;
}

/* hook */
.hook{
  font-size:28px;
  font-weight:900;
  color:#38bdf8;
  text-align:center;
  white-space:nowrap;
  text-shadow:0 10px 30px rgba(0,0,0,.8);
}

/* active states */
.fly.in{
  opacity:1;
  filter:none;
}
.fly.out{
  opacity:0;
  filter:blur(6px);
}
</style>
</head>

<body>

<!-- MOCKUP -->
<div class="phone">
  <div class="body"></div>
  <div class="screen">
    <video muted playsinline preload="auto" id="video">
      <source src="https://raw.githubusercontent.com/etkyogya-hub/cbtlearning-snbt-1/main/videos/demo-snbt.mp4" type="video/mp4">
    </video>
  </div>
</div>

<!-- FLY OBJECTS -->
<div class="fly" id="quizFly"></div>
<div class="fly hook" id="hookFly"></div>

<script>
const quizFly = document.getElementById("quizFly");
const hookFly = document.getElementById("hookFly");
const video = document.getElementById("video");

const quizHTML = `
  <div class="quiz">
    <p>Jika 3x + 5 = 20, maka x = â€¦</p>
    <ul>
      <li>A. 3</li>
      <li>B. 4</li>
      <li>C. 5</li>
      <li>D. 6</li>
    </ul>
  </div>
`;

const hooks = [
  "SNBT Bisa Dibedah Tanpa Bimbel",
  "Latihan Mandiri, Akurat",
  "Rationale Generator Aktif"
];

let hookIndex = 0;

function randomVector(){
  const x = (Math.random()*2 - 1) * 140;
  const y = (Math.random()*2 - 1) * 120;
  const r = (Math.random()*40 - 20);
  return {x,y,r};
}

function reset(el){
  el.className = el.className.split(" ")[0] + " fly";
  el.style.transform = "translate(-50%,-50%) scale(1)";
  void el.offsetWidth;
}

function sequence(){
  reset(quizFly);
  reset(hookFly);

  // set content
  quizFly.innerHTML = quizHTML;
  hookFly.innerHTML = hooks[hookIndex];
  hookIndex = (hookIndex + 1) % hooks.length;

  const dir = randomVector();

  // QUIZ IN
  quizFly.classList.add("in");

  // QUIZ FLY OUT
  setTimeout(()=>{
    quizFly.classList.add("out");
    quizFly.style.transform =
      `translate(${dir.x}vw,${dir.y}vh) scale(2.6) rotate(${dir.r}deg)`;
  },1200);

  // VIDEO PLAY
  setTimeout(()=>{
    video.currentTime = 0;
    video.play();
  },2000);

  // HOOK FOLLOW (tracking)
  setTimeout(()=>{
    hookFly.classList.add("in");
    hookFly.style.transform =
      `translate(${dir.x*0.6}vw,${dir.y*0.6}vh) scale(1.6) rotate(${dir.r/2}deg)`;
  },2600);

  // HOOK OUT
  setTimeout(()=>{
    hookFly.classList.add("out");
    hookFly.style.transform =
      `translate(${dir.x*1.1}vw,${dir.y*1.1}vh) scale(2.4) rotate(${dir.r}deg)`;
  },4200);

  // LOOP
  setTimeout(sequence,6200);
}

sequence();
</script>

</body>
</html>
