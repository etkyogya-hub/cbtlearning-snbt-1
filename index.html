<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width, initial-scale=1, viewport-fit=cover">

<title>SNBT CBT Simulator</title>

<style>
/* ===== RESET ===== */
*{box-sizing:border-box}
body{
  margin:0;
  background:#020617;
  color:#e5e7eb;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  overflow:auto;
  padding:
    env(safe-area-inset-top)
    env(safe-area-inset-right)
    env(safe-area-inset-bottom)
    env(safe-area-inset-left);
}

/* ===== TYPO SAFE ===== */
:root{
  --hero:clamp(9rem,15vw,18rem);
  --xl:clamp(4.5rem,7vw,8rem);
  --md:clamp(1.6rem,3vw,2.6rem);
}

/* ===== STAGE ===== */
#stage{
  width:100%;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  transform-origin:center;
}

/* ===== SCENES ===== */
.scene{
  position:absolute;
  width:100%;
  height:100%;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  opacity:0;
  pointer-events:none;
  transition:opacity .35s ease;
}
.scene.active{
  opacity:1;
  pointer-events:auto;
}

.big{font-size:var(--hero);font-weight:900;line-height:.9}
.xl{font-size:var(--xl);font-weight:800}
.sm{font-size:var(--md);opacity:.8}
.stack{font-size:var(--md);letter-spacing:.08em}

.circle{
  border:1px solid #e5e7eb;
  border-radius:999px;
  padding:8px 18px;
  margin-bottom:20px;
  font-size:14px;
}

/* ===== PROGRESS ===== */
#progress{
  position:fixed;
  top:14px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:6px;
  width:92%;
  max-width:420px;
}
#progress span{
  flex:1;
  height:3px;
  background:#1e293b;
  overflow:hidden;
}
#progress span.active::after{
  content:'';
  display:block;
  height:100%;
  background:#e5e7eb;
  animation:fill linear forwards;
}
@keyframes fill{from{width:0}to{width:100%}}

/* ===== CTA ===== */
.cta{
  position:absolute;
  bottom:12%;
  padding:14px 22px;
  border-radius:14px;
  background:#e5e7eb;
  color:#020617;
  font-weight:700;
  text-decoration:none;
  font-size:15px;
  opacity:0;
  transform:translateY(18px);
  animation:ctaIn .8s ease forwards;
  animation-delay:.6s;
}
@keyframes ctaIn{to{opacity:1;transform:none}}
</style>
</head>

<body>

<div id="progress">
  <span></span><span></span><span></span>
  <span></span><span></span><span></span><span></span>
</div>

<div id="stage">

<!-- SCENE 1 -->
<div class="scene active">
  <div class="big">SNBT</div>
</div>

<!-- SCENE 2 -->
<div class="scene">
  <div class="big">BUKAN</div>
  <div class="stack">HAFALAN</div>
</div>

<!-- SCENE 3 -->
<div class="scene">
  <div class="xl">POLA</div>
  <div class="stack">BERPIKIR</div>
</div>

<!-- SCENE 4 -->
<div class="scene">
  <div class="circle">CBT • MOBILE</div>
  <div class="xl">SIMULASI</div>
</div>

<!-- SCENE 5 -->
<div class="scene">
  <div class="xl">MANDIRI</div>
</div>

<!-- SCENE 6 -->
<div class="scene">
  <div class="circle">UNTUK ORANG TUA</div>
  <div class="big">TIDAK</div>
  <div class="stack">JANJI INSTAN</div>
</div>

<!-- SCENE 7 CTA -->
<div class="scene">
  <div class="xl">SYSTEM</div>
  <div class="sm">BUILT BY G. ASFARRASYID</div>
  <a class="cta" href="quiz/index.html">Mulai Simulasi CBT →</a>
</div>

</div>

<script>
/* ===== AUTO SCALE BY ASPECT RATIO ===== */
function autoScale(){
  const baseW = 390;
  const baseH = 844;
  const scale = Math.min(
    window.innerWidth / baseW,
    window.innerHeight / baseH
  );
  document.getElementById('stage')
    .style.transform = `scale(${scale})`;
}
window.addEventListener('resize',autoScale);
autoScale();

/* ===== SCENE ENGINE + TRACKING ===== */
const scenes=document.querySelectorAll('.scene');
const bars=document.querySelectorAll('#progress span');
let index=0,delay=3000;

let stats=JSON.parse(localStorage.getItem('snbtTrack'))||{
  scenes:Array(scenes.length).fill(0),
  reachedCTA:false,
  ctaClicked:false
};
let start=Date.now();

function show(n){
  let now=Date.now();
  stats.scenes[index]+=now-start;
  start=now;

  scenes.forEach(s=>s.classList.remove('active'));
  bars.forEach(b=>{
    b.classList.remove('active');
    b.style.animation='none';
    b.offsetHeight;
  });

  scenes[n].classList.add('active');
  bars[n].classList.add('active');
  bars[n].style.animationDuration=delay+'ms';

  if(n===scenes.length-1) stats.reachedCTA=true;
  localStorage.setItem('snbtTrack',JSON.stringify(stats));
}

let timer=setInterval(()=>{
  index++;
  if(index>=scenes.length){clearInterval(timer);return;}
  show(index);
},delay);

document.body.addEventListener('click',()=>{
  clearInterval(timer);
  index++;
  if(index>=scenes.length)return;
  show(index);
});

document.querySelector('.cta')?.addEventListener('click',()=>{
  stats.ctaClicked=true;
  localStorage.setItem('snbtTrack',JSON.stringify(stats));
});
</script>

</body>
</html>
